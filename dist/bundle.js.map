{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/CanvasExtend.js","webpack:///./src/List.js","webpack:///./src/Main.js","webpack:///./src/Poly.js","webpack:///./src/Seg.js","webpack:///./src/Segs.js","webpack:///./src/Stroke.js","webpack:///./src/Vec.js"],"names":["CanvasRenderingContext2D","prototype","lineToVec","vec","lineTo","x","y","moveToVec","moveTo","bezierCurveTo","cv1","cv2","ev","point","v","undefined","dpr","window","devicePixelRatio","ratio","canvas","height","beginPath","arc","Math","PI","stroke","drawSegs","segs","head","mult","seg","tail","console","log","drawContours","contours","contour","closePath","text","fillText","drawBound","vecs","num","r","g","b","centroid","toPolyCentroid","save","fillStyle","restore","drawZig","fill","List","Array","constructor","args","last","length","sum","sumFunc","e","reduce","acc","n","same","func","every","i","a","accum","accumFunc","concat","copy","map","zip","newList","_e","Error","list","assert","Number","isInteger","listMapped","document","createElement","ctx","getContext","width","style","getElementById","appendChild","translate","scale","testPoly","len","range","vecsCircles","Vec","push","Segs","fromVecs","flip","poly","Poly","polyCopy","shrink","testStroke","vecsCricle","vecsLine","stroke1","Stroke","stroke2","enter","cutEnter","cutGoing","cuts","cutLeave","poly1","poly2","trans","draw","segsLine","close","conn","Seg","iadd","neg","strokeStyle","index","entries","bisecs","bisec","angleBisect","j","segIntersect","head1","tail1","head2","tail2","h1h2","sub","h1t1","h2t2","detT","cross","detU","detS","t","u","p","add","hd","tl","diff","mag","dir","norm","lerp","rotate","angle","irotate","imult","torque","Torque","center","mass","intersect","that","thisDir","thatDir","sign","error","reverse","temp","slice","pop","lens","other","intersects","partialSums","component","crosses","transVec","headOffset","pointAt","given","ithSeg","lenInSeg","tan","succ","splice","notchTip","result","product","toProduct","segList","closed","cut","attr","ang","cos","sin","isub","polar","ipolar","iscale","about","theta","rad","hypot","atan2","isNaN","addAttr","setAttr","attrObject","Object","assign","removeAttr","attrKey","JSON","parse","stringify","toArray"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/Main.js\");\n","CanvasRenderingContext2D.prototype.lineToVec = function(vec){\n    this.lineTo(vec.x, vec.y);\n}\n\nCanvasRenderingContext2D.prototype.moveToVec = function(vec){\n    this.moveTo(vec.x, vec.y);\n}\n\nCanvasRenderingContext2D.prototype.bezierCurveTo = function(cv1, cv2, ev){\n    this.bezierCurveTo(cv1.x, cv1.y, cv2.x, cv2.y, ev.x, ev.y);\n}\n\n\nCanvasRenderingContext2D.prototype.point = function(v){\n\n    if (v != undefined){\n        let dpr = window.devicePixelRatio,\n            ratio = this.canvas.height/dpr;\n    \n        this.beginPath()\n        this.arc(v.x*ratio, v.y*ratio, 3, 0, Math.PI*2);\n        this.stroke();\n    }\n}\n\nCanvasRenderingContext2D.prototype.drawSegs = function(segs){\n\n    let dpr = window.devicePixelRatio,\n        ratio = this.canvas.height/2/dpr;\n    try {\n        this.beginPath();\n        this.moveToVec(segs[0].head.mult(ratio));\n        for (let seg of segs){\n            this.lineToVec(seg.tail.mult(ratio));\n        }\n        this.stroke();\n    } catch {\n        console.log('Illegal line segs: ', segs);\n    }\n}\n\nCanvasRenderingContext2D.prototype.drawContours = function(contours){\n\n    let dpr = window.devicePixelRatio,\n        ratio = this.canvas.height/2/dpr;\n    try {\n        for (let contour of contours){\n            this.moveToVec(contour[0].head.mult(ratio));\n            for (let seg of contour){\n                this.lineToVec(seg.tail.mult(ratio));\n            }\n            this.closePath();\n        }\n    } catch {\n        console.log('Illegal line segs: ', contours);\n    }\n}\n\n\nCanvasRenderingContext2D.prototype.text = function(text, vec){\n\n    if (vec != undefined){\n        let dpr = window.devicePixelRatio,\n            ratio = this.canvas.height/2/dpr;\n    \n        this.fillText(text, vec.x*ratio, vec.y*ratio);\n    }\n\n}\n\nCanvasRenderingContext2D.prototype.drawBound = function(vecs, num, {r, g, b}){\n\n    let centroid = toPolyCentroid(vecs);\n    if (num !== undefined){\n        this.save();\n        this.fillStyle = 'rgb(128, 0, 0, 0.3)';\n        this.text(num, centroid);\n        this.restore();\n    } else {\n        this.point(centroid);\n    }\n\n    this.fillStyle = `rgba(${r*128}, ${g}, ${b}, 0.1)`;\n    this.beginPath();\n    this.drawZig(vecs);\n    this.closePath();\n    this.fill();\n}\n","// Extended JavaScript native Array class with handy methods.\n\nexport default class List extends Array {\n    constructor(...args){\n        super(...args);\n    }\n\n    last(){\n        return this[this.length - 1];\n    }\n\n    sum(sumFunc=(e)=>e) {\n        return this.reduce((acc, n) => acc + sumFunc(n), 0);      \n    }\n\n    same(func=(e) => e){\n        return this.every((v, i, a) => func(v) === func(a[0]));\n    }\n\n    accum(accumFunc=(e)=>e){\n        return this.reduce((acc, x) => acc.concat(acc.last() + accumFunc(x)), [0])\n    }\n\n    // copy the list, and try to clone the elements if\n    // a copy method exists.\n    copy(){\n        return this.map(e => e.copy ? e.copy() : e);\n    }\n\n    zip(func=(e)=>e){\n        if((this[0].length) && (this[0].length > 0) && this.same(e => e.length)){\n            let newList = this[0].map((_e, i) => {\n                return func(this.map(e => e[i]));\n            })\n            return new List(...newList);\n        } else throw Error('Invalid array dimension for zipping');\n    }\n}\n\n(() => {\n    let list = new List(1,2,3);\n    console.assert(list[0]===1 && list.length===3, 'List: Constructor failed');\n    console.assert(list.sum(e=>e*2)===12, 'List: sum failed');\n    console.assert(list.same(e=>Number.isInteger(e)), 'List: same failed');\n\n    let listMapped = list.map(e => [e, e*2]);\n    console.assert(listMapped.zip().last().sum()==12, 'List: zip failed');\n})();","import './CanvasExtend';\n\nimport Vec from './Vec';\nimport List from './List';\nimport Segs from './Segs';\nimport Poly from './Poly';\nimport Stroke from './Stroke';\n\nlet canvas = document.createElement('canvas'),\n    ctx = canvas.getContext('2d'),\n    dpr = window.devicePixelRatio;\n\ncanvas.width  = 400 * dpr;\ncanvas.height = 400 * dpr;\ncanvas.style.width  = 400;\ncanvas.style.height = 400;\ndocument.getElementById('canvas-container').appendChild(canvas);\nctx.translate(canvas.width/2, canvas.height/2);\nctx.scale(dpr, dpr);\n\nfunction testPoly(){\n    let len  = 19, range = 5;\n    let vecsCircles = new List(0);\n    for (let r = 0; r < 6; r++){\n\n        let vecs = Array(len).fill(0).map((e, i) => (new Vec(i/(len)*360)).mult(0.8 * (r+1) / range));\n\n        vecsCircles.push((new Segs(0)).fromVecs(vecs));\n\n        if(r % 2 === 1){\n            console.log(vecsCircles[r]);\n            vecsCircles[r].flip();\n        }\n    }\n\n    let poly = new Poly(vecsCircles),\n        polyCopy = poly.copy();\n    console.log(poly)\n    poly.shrink(0.05, ctx);\n    // polyCopy.draw(ctx);\n    // poly.draw(ctx);\n}\ntestPoly();\n\nfunction testStroke(){\n    let len  = 15;\n    let vecsCricle = Array(len).fill(0).map((e, i) => (new Vec(i/(len)*360)).mult(0.5));\n    let vecsLine = Array(len).fill(0).map((e, i)=> new Vec( i/(6-1)*2 - 1, 0.3) );\n\n    let stroke1 = new Stroke((new Segs(0)).fromVecs(vecsCricle), true),\n        stroke2 = new Stroke(new Segs(0).fromVecs(vecsLine));\n\n    let enter = 3;\n    stroke1.segs.cutEnter(enter, 0.5);\n    stroke1.segs.cutGoing(enter+1, new Vec(0, 0));\n    stroke1.segs.cutGoing(enter+2, new Vec(-0.1, 0));\n    let cuts = stroke1.segs.cutLeave(enter+3, 15, 0.5);\n    console.log(cuts[0].map(e=>e.head),'cutresult');\n    let poly1 = new Poly(new List(cuts[0])),\n        poly2 = new Poly(new List(cuts[1]));\n\n\n    poly1 = poly1.copy();\n    poly2 = poly2.copy();\n    // poly1.shrink(0.5);\n    // poly2.shrink(0.5);\n    // poly1.trans(new Vec(0.1, -0.1));\n    poly2.trans(new Vec(0.1, -0.2));\n\n    poly1.draw(ctx, true);\n    poly2.draw(ctx, true);\n\n    // stroke1.draw(ctx);\n    // stroke2.draw(ctx);\n\n    // segs1.flip();\n    // console.assert(segs1[0].head === segs2.last().tail, 'Segs: flip error');\n\n    let segsLine = new Segs(vecsLine);\n    // console.log(segsLine.torque().center);\n}\ntestStroke();","import List from './List';\nimport Seg from './Seg';\n\nexport default class Poly {\n    constructor(contours=(new List(0))){\n        this.contours = contours;\n        this.close();\n    }\n\n    close(){\n        for (let contour of this.contours){\n            if(contour.last().tail !== contour[0].head){\n                let conn = new Seg(contour.last().tail, contour[0].head);\n                contour.push(conn); \n            }\n        }\n    }\n\n    copy(){\n        let poly = new Poly(this.contours.copy());\n        poly.close();\n        return poly;\n    }\n\n    trans(vec){\n        for (let contour of this.contours){\n            contour.trans(vec);\n            contour.last().tail.iadd(vec.neg());\n            // contour.last().tail.iadd(vec.neg());\n        }\n    }\n\n    draw(ctx, stroke){\n        ctx.strokeStyle = 'black';\n        ctx.fillStyle='rgb(0, 0, 0, 0.1)';\n        ctx.beginPath();\n        ctx.drawContours(this.contours);\n        ctx.fill();\n        if(stroke) ctx.stroke();\n\n        ctx.save();\n        ctx.fillStyle='rgb(0, 0, 0, 0.5)'\n        for (let contour of this.contours){\n            for (let [index, seg] of contour.entries()){\n                ctx.text(index, seg.head);\n            }\n        }\n        ctx.restore();\n    }\n\n    shrink(shrink){\n\n        let bisecs = new List(0);\n        for (let contour of this.contours){\n            bisecs.push([]);\n            for (let i = 0; i < contour.length; i++){\n                let last = (i === 0) ? contour.length - 1 : i - 1;\n                let bisec = contour[last].angleBisect(contour[i]);\n                bisecs.last().push(bisec.mult(shrink));\n            }\n        }\n\n        for (let i = 0; i < this.contours.length; i++){\n            let contour = this.contours[i];\n            for (let j = 0; j < contour.length; j++){\n                contour[j].head.iadd(bisecs[i][j]);\n            }\n        }\n    }\n}\n\n","// https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection#Given_two_points_on_each_line\n// \n// note that:\n// |x1-x3 x3-x4|\n// |           | (determinant) is equivalent to\n// |y1-y3 y3-y4|\n// \n// cross((x1-x3, y1-y3), (x3-x4, y3-y4)), or\n// \n// cross(P1-P3, P3-P4)\n\nfunction segIntersect(head1, tail1, head2, tail2){\n    let h1h2 = head1.sub(head2),\n        h1t1 = head1.sub(tail1),\n        h2t2 = head2.sub(tail2),\n        detT = h1h2.cross(h2t2),\n        detU = h1t1.cross(h1h2),\n        detS = h1t1.cross(h2t2),\n        t = detT/detS,\n        u = -detU/detS,\n        p = head1.add(tail1.sub(head1).mult(t));\n    \n    return {t, u, p}\n}\n\nimport Vec from './Vec';\n\nexport default class Seg {\n    constructor(hd, tl){\n        this.head = hd;\n        this.tail = tl;\n    }\n\n    diff (){\n        return this.tail.sub(this.head);\n    }\n\n    len (){\n        return this.tail.sub(this.head).mag();\n    }\n\n    dir (){\n        return this.tail.sub(this.head).norm();\n    }\n\n    lerp(ratio){\n        return this.head.add(this.tail.sub(this.head).mult(ratio));\n    }\n\n    trans(vec){\n        this.head.iadd(vec);\n        this.tail.iadd(vec);\n    }\n\n    rotate(angle){\n        this.head.irotate(angle);\n        this.tail.irotate(angle);\n    }\n\n    scale(mag){\n        this.head.imult(mag);\n        this.tail.imult(mag);\n    }\n\n    torque(){\n        return new Torque({center:this.lerp(0.5), mass: this.len()});\n    }\n\n    intersect(that){\n        return segIntersect(this.head, this.tail, that.head, that.tail);\n    }\n\n    cross(){\n        return this.head.cross(this.tail);\n    }\n\n    // the previous one connect with the \n    angleBisect(that){\n        if(that.head == this.tail){\n            \n            let thisDir = this.dir().neg(),\n                thatDir = that.dir();\n\n            return thisDir.add(thatDir).mult(Math.sign(thisDir.cross(thatDir))).norm();\n\n        } else console.error('angleBisector is only permitted if two segs share same vec', this, that);\n    }\n\n    reverse(){\n        let temp = this.head;\n        this.head = this.tail;\n        this.tail = temp;\n    }\n\n    copy(){\n        return new Seg(this.head.copy(), this.tail.copy());\n    }\n}","import List from './List';\nimport Seg from './Seg';\n\nexport default class Segs extends List {\n    constructor(...segs){\n        super(...segs);\n    }\n\n    // torque calculation will be added here.\n\n    fromVecs(vecs){\n        let list = new List(vecs.slice(0, -1), vecs.slice(1))\n        .zip(e=>new Seg(...e));\n\n        while(list.length > 0){\n            this.push(list.pop());\n        }\n        this.reverse();\n        return this;\n    }\n\n    flip(){\n        this.reverse();\n        for (let seg of this){\n            seg.reverse();\n        }\n    }\n\n    lens(){\n        let lens = new List(0);\n        for (let seg of this){\n            lens.push(seg.len());\n        }\n        return lens;\n    }\n\n    intersect(other){\n        let intersects = new List(0)\n        for (let seg of this){\n            intersects.push(other.intersect(seg));\n        }\n    }\n\n    partialSums(component){\n        let sum = [];\n        for (let seg of this){\n            sum.push(seg.head[component]+seg.tail[component]);\n        }\n        return sum;\n    }\n\n    crosses(){\n        let crosses = [];\n        for(let seg of this){\n            crosses.push(seg.head.cross(seg.tail))\n        }\n    }\n\n    trans(transVec){\n        for (let seg of this){\n            console.log('yay');\n            seg.head.iadd(transVec);\n        }\n        this.last().tail.iadd(transVec);\n    }\n\n    rotate(angle){\n        let headOffset = this[0].head.copy();\n        this.trans(headOffset.neg());\n        for (let seg of this){\n            seg.tail.irotate(angle);\n        }\n        this.trans(headOffset);\n    }\n\n    scale(ratio){\n        let headOffset = this.segs[0].head.copy();\n        this.trans(headOffset.neg());\n        for (let seg of this){\n            seg.tail.imult(ratio);\n        }\n        this.trans(headOffset);\n    }\n\n    pointAt(ratio){\n        let lens = this.lens(),\n            accum = lens.accum(),\n            given = accum.last() * ratio;\n\n        var ithSeg = 0,\n            lenInSeg = 0;\n        for (let [index, len] of accum.entries()){\n            if (given < len) {\n                ithSeg = index - 1;\n                lenInSeg = len - given;\n                break;\n            }\n        }\n\n        return {\n            point: this[ithSeg].lerp(1 - lenInSeg/lens[ithSeg]),\n            tan: this[ithSeg].dir()\n        };\n    }\n\n    cutEnter(ithSeg, ratio){\n        let seg = this[ithSeg],\n            lerp = seg.lerp(ratio),\n            succ = new Seg(lerp, seg.tail);\n\n        seg.tail = lerp;\n        this.splice(ithSeg+1, 0, succ);\n        console.log(this, 'cutpoint');\n    }\n\n    cutGoing(ithSeg, point){\n        let seg = this[ithSeg];\n        this.splice(ithSeg, 0, new Seg(seg.head, point), new Seg(point, seg.head));\n    }\n\n    cutLeave(notchTip, ithSeg, ratio){\n\n        // 1. the leaving point is created over the ith segment\n        //    by this moment, the tail of the ith seg or the head\n        //    of the ith+1 seg is the leaving point.\n        this.cutEnter(ithSeg, ratio);\n        // 2. make the current notch tip reach the leaving point\n        //    NOTE that the actual tip point is the tail of notchTip.\n        this.cutGoing(notchTip, this[ithSeg].tail);\n\n        let result = new List(this.slice(notchTip+1, ithSeg+3), this.slice(1, notchTip+1).concat(this.slice(ithSeg+3)));\n        return result;\n    }\n\n    torque(){\n        let product = new Vec();\n        for (let seg of this){\n            product.iadd(seg.torque().toProduct());\n        }\n        let mass = this.lens().sum();\n        let center = product.mult((this.length === 0) ? 0 : 1/mass);\n\n        return new Torque({center, mass});\n    }\n\n    copy(){\n        // console.log(this);\n        let segs = this.map(seg => seg.copy ? seg.copy() : seg);\n        for (let i = 0; i < segs.length - 1; i++){\n            segs[i].tail = segs[i+1].head;\n        }\n        return segs;\n    }\n}","import Seg from './Seg';\n\nexport default class Stroke {\n    constructor(segList, closed){\n        this.segs = segList;\n\n        if (closed){\n            this.closed = true;\n            let conn = new Seg(this.segs.last().tail.copy(), this.segs[0].head.copy());\n            this.segs.push(conn); \n        }\n    }\n\n    draw(ctx){\n        ctx.strokeStyle = 'black';\n        ctx.beginPath();\n        ctx.drawSegs(this.segs);\n        ctx.stroke();\n    \n        ctx.save();\n        ctx.fillStyle = \"black\";\n        for (let [index, seg] of this.segs.entries()){\n            ctx.text(index, seg.head);\n        }\n\n        ctx.restore();\n    }\n\n    cut(poly){\n        // 1. test if the head of the stroke is inside of any\n\n    }\n}","export default class Vec{\n    /**\n     * Simple Vector class.\n     * \n     * @param {any} x \n     * @param {any} y \n     */\n    constructor(x, y, attr){\n        if(attr === undefined){\n            this.attr = {};\n\n            if (y === undefined){\n                if(x === undefined) {\n\n                    // For nothing given, new vec created\n                    \n                    this.x = 0;\n                    this.y = 0;\n                } else if (x.x !== undefined && x.y !== undefined){\n\n                    // if argument given as {x:1, y:1}\n                    \n                    this.x = x.x;\n                    this.y = x.y;\n                } else if (x.len !== undefined && x.ang !== undefined){\n\n                    // if argument given as {len: 1, ang: 0}\n\n                    this.x = x.len * Math.cos(x.ang*Math.PI/180);\n                    this.y = x.len * Math.sin(x.ang*Math.PI/180);\n                } else if (typeof x === 'number'){\n\n                    // if x is a number \n\n                    this.x = Math.cos(x*Math.PI/180);\n                    this.y = Math.sin(x*Math.PI/180);\n                }\n            } else {\n                this.x = x;\n                this.y = y;\n            }\n        } else {\n            this.attr = attr;\n            this.x = x;\n            this.y = y;\n        }\n\n        \n    }\n\n    /**\n     * \n     * @param {Vec} vec another vec to be added\n     * @returns {Vec}\n     */\n    add(vec){\n        return new Vec(this.x + vec.x, this.y + vec.y);\n    }\n\n    iadd(vec){\n        this.x += vec.x;\n        this.y += vec.y;\n    }\n    /**\n     * \n     * @param {Vec} vec another vec to be subtracted\n     * @returns {Vec}\n     */\n    sub(vec){\n        return new Vec(this.x - vec.x, this.y - vec.y);\n    }\n\n    isub(vec){\n        this.x -= vec.x;\n        this.y -= vec.y;\n    }\n\n    /**\n     * \n     * @param {Vec, number} vec can be either a vec or a scalar. If it's a scalar,\n     *                          then times it both to x and y.\n     * @returns {Vec}\n     */\n    mult(vec){\n        if(vec.x === undefined){\n            return new Vec(this.x * vec, this.y * vec);\n        } else {\n            return new Vec(this.x * vec.x, this.y * vec.y);\n        }\n    }\n\n    imult(vec){\n        if(vec.x === undefined){\n            this.y *= vec;\n            this.x *= vec;\n        } else {\n            this.x *= vec.x;\n            this.y *= vec.y;\n        }\n    }\n\n    /**\n     * transform point in polar manner. returns a new vector relative\n     * to this one.\n     * @param {number} len length\n     * @param {number} ang angle in degree\n     */\n    polar(vec){\n        return new Vec(\n            this.x + vec.len * Math.cos(vec.ang * Math.PI/180),\n            this.y + vec.len * Math.sin(vec.ang * Math.PI/180)\n        )\n    };\n\n    ipolar(vec){\n        this.x += vec.len * Math.cos(vec.ang * Math.PI/180);\n        this.y += vec.len * Math.sin(vec.ang * Math.PI/180);\n    }\n\n    iscale(ratio, about){\n        // console.log(this, ratio, about, \"iscale\");\n        this.isub(about);\n        this.imult(ratio);\n        this.iadd(about);\n    }\n\n        /**\n     * rotate\n     * @param {number} theta angle to rotate in degree.\n     */\n    rotate(theta){\n\n        switch(theta){\n            case 90     : return new Vec(-this.y, this.x);\n            case -90    : return new Vec(this.y, -this.x);\n            case 180    : \n            case -180   : return new Vec(-this.x, -this.y);\n            default: \n                let rad = theta / 180 * Math.PI,\n                sin = Math.sin(rad),\n                cos = Math.cos(rad);\n\n            return new Vec(\n                this.x * cos - this.y * sin,\n                this.x * sin + this.y * cos\n            )\n        }\n\n    }\n\n    irotate(theta){\n        let vec = this.rotate(theta);\n        this.x = vec.x;\n        this.y = vec.y;\n    }\n\n    neg(){\n        return new Vec(-this.x, -this.y);\n    }\n\n    /**\n     * returns the cross product between this and vec.\n     * also is the result of det\n     * \n     * |this.x   that.x|\n     * |               |\n     * |this.y   that.y|\n     * \n     * @param {Vec} that another vector\n     */\n    cross(that){\n        return this.x * that.y - that.x * this.y;\n    }\n \n    mag(){\n        return Math.hypot(this.x, this.y);\n    }\n\n    norm(){\n        let mag = this.mag();\n        return this.mult(mag === 0 ? 0 : 1/mag);\n    }\n\n    angle(){\n        return Math.atan2(this.y, this.x) / Math.PI * 180;\n    }\n\n    isNaN(){\n        return (isNaN(this.x) || isNaN(this.y));\n    }\n\n    addAttr(attr){\n        this.attr.push(attr);\n    }\n\n    /**\n     * Set attribute to Vector. overwrite existing attributes.\n     * @param {object} attrObject \n     */\n    setAttr(attrObject){\n        return Object.assign(this.attr, attrObject);\n    }\n\n    removeAttr(attrKey){\n        this.attr[attrKey] = undefined;\n    }\n\n    /**\n     * copy: duplicate an object instance of this.\n     * @returns {Vec}\n     */\n    copy(){\n        return new Vec(this.x, this.y, JSON.parse(JSON.stringify(this.attr)));\n    }\n\n    toArray(){\n        return [this.x, this.y];\n    }\n\n    draw(ctx){\n        ctx.save();\n\n        ctx.strokeStyle = 'gray';\n        ctx.point(this);\n    \n        ctx.restore();\n    }\n}"],"sourceRoot":""}