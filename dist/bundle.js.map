{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/CanvasExtend.js","webpack:///./src/List.js","webpack:///./src/Main.js","webpack:///./src/Radical.js","webpack:///./src/Seg.js","webpack:///./src/Segs.js","webpack:///./src/Stroke.js","webpack:///./src/Torque.js","webpack:///./src/Vec.js"],"names":["CanvasRenderingContext2D","prototype","lineToVec","vec","lineTo","x","y","moveToVec","moveTo","bezierCurveTo","cv1","cv2","ev","point","v","undefined","dpr","window","devicePixelRatio","ratio","canvas","height","beginPath","arc","Math","PI","fill","drawSegs","segs","head","mult","seg","tail","stroke","console","log","drawContours","contours","contour","closePath","text","fontsize","save","font","textAlign","textBaseline","fillText","restore","drawBound","vecs","num","r","g","b","centroid","toPolyCentroid","fillStyle","drawZig","List","Array","constructor","args","most","slice","last","length","rest","sum","same","e","Error","Cons","func","acc","n","add","reduce","every","i","a","accum","accumFunc","concat","from","transpose","newList","map","_e","diff","diffFunc","list","copy","module","exports","document","createElement","ctx","getContext","width","style","getElementById","appendChild","translate","scale","tes","len","range","vecsCircles","Vec","push","Segs","fromVecs","flip","poly","Radical","polyCopy","testShrink","vecsCircle","vecsLine","stroke1","Stroke","stroke2","enter","cutEnter","cutGoing","cuts","cutLeave","poly1","poly2","poly3","poly4","trans","shrink","draw","segsLine","testCut","seg1","Seg","seg2","seg3","intersect","edges","circles","circle","area","cut","shratio","testCentroid","testRadical","radical","stroke3","addStroke","closeContours","strokes","equal","conn","union","contourLabels","first","restLabels","unioned","label","undoCutThrough","flat","undoCut","split","splitted","unionedContour","sub","center","iadd","neg","color","strokeStyle","index","entries","abs","FourPointIntersect","head1","tail1","head2","tail2","h1h2","h1t1","h2t2","detA","cross","detB","detS","ratioA","ratioB","lerp","det","TwoSegIntersect","hd","tl","rotate","angle","origin","mag","torque","Torque","fromVec","that","closed","actualVecs","toVecs","is","pop","transVec","actualOrigin","reverse","vals","mid","lens","intersects","ratioThat","ratioThis","setAttr","indexThis","splice","cutThrough","enterIndex","exitIndex","left","right","intersectHead","cutterSeg","EPSILON","con","t","u","d","sort","intersectTail","p","intersectSeg","segList","displayed","joint","thisPos","thatPos","unshift","entered","notchPrev","splitPrev","cutter","nextCutter","headIntersects","tailIntersects","cutThroughRing","torques","prodSum","toProduct","accX","accY","massSum","mass","attr","ang","cos","sin","name","about","theta","rad","dot","hypot","norm","atan2","addAttr","attrName","attrValue","attrObject","Object","assign","JSON","parse","stringify","toString","toFixed"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/Main.js\");\n","CanvasRenderingContext2D.prototype.lineToVec = function(vec){\n    this.lineTo(vec.x, vec.y);\n}\n\nCanvasRenderingContext2D.prototype.moveToVec = function(vec){\n    this.moveTo(vec.x, vec.y);\n}\n\nCanvasRenderingContext2D.prototype.bezierCurveTo = function(cv1, cv2, ev){\n    this.bezierCurveTo(cv1.x, cv1.y, cv2.x, cv2.y, ev.x, ev.y);\n}\n\n\nCanvasRenderingContext2D.prototype.point = function(v){\n\n    if (v != undefined){\n        let dpr = window.devicePixelRatio,\n            ratio = this.canvas.height/2/dpr;\n    \n        this.beginPath()\n        this.arc(v.x*ratio, v.y*ratio, 1.8, 0, Math.PI*2);\n        this.fill();\n    }\n}\n\nCanvasRenderingContext2D.prototype.drawSegs = function(segs){\n\n    let dpr = window.devicePixelRatio,\n        ratio = this.canvas.height/2/dpr;\n    try {\n        this.beginPath();\n        this.moveToVec(segs[0].head.mult(ratio));\n        for (let seg of segs){\n            this.lineToVec(seg.tail.mult(ratio));\n        }\n        this.stroke();\n    } catch {\n        console.log('Illegal line segs: ', segs);\n    }\n}\n\nCanvasRenderingContext2D.prototype.drawContours = function(contours){\n\n    let dpr = window.devicePixelRatio,\n        ratio = this.canvas.height/2/dpr;\n    try {\n        for (let contour of contours){\n            this.moveToVec(contour[0].head.mult(ratio));\n            for (let seg of contour){\n                this.lineToVec(seg.tail.mult(ratio));\n            }\n            this.closePath();\n        }\n    } catch {\n        console.log('Illegal line segs: ', contours);\n    }\n}\n\n\nCanvasRenderingContext2D.prototype.text = function(text, vec, fontsize){\n\n    this.save();\n    this.font = `${fontsize ? fontsize : 10}px Helvetica`;\n    this.textAlign = 'center';\n    this.textBaseline = 'middle';\n    if (vec != undefined){\n        let dpr = window.devicePixelRatio,\n            ratio = this.canvas.height/2/dpr;\n    \n        this.fillText(text, vec.x*ratio, vec.y*ratio);\n    }\n    this.restore();\n}\n\nCanvasRenderingContext2D.prototype.drawBound = function(vecs, num, {r, g, b}){\n\n    let centroid = toPolyCentroid(vecs);\n    if (num !== undefined){\n        this.save();\n        this.fillStyle = 'rgb(128, 0, 0, 0.3)';\n        this.text(num, centroid);\n        this.restore();\n    } else {\n        this.point(centroid);\n    }\n\n    this.fillStyle = `rgba(${r*128}, ${g}, ${b}, 0.1)`;\n    this.beginPath();\n    this.drawZig(vecs);\n    this.closePath();\n    this.fill();\n}\n","// Extended JavaScript native Array class with handy methods.\n\nclass List extends Array {\n    constructor(...args){\n        super(...args);\n    }\n\n    most(){\n        return this.slice(0, -1);\n    }\n\n    last(){\n        return this[this.length - 1];\n    }\n\n    rest(){\n        return this.slice(1);\n    }\n\n    sum() {\n        if(!this.same(e => e.constructor)){\n            throw Error('Sum: cannot be applied to elements with different type');\n        }\n        let Cons = this[0].constructor,\n            func = (acc, n) => acc.add ? acc.add(n) : (acc + n);\n\n        return this.reduce(func, new Cons());\n    }\n\n    same(func=(e) => e){\n        return this.every((v, i, a) => func(v) === func(a[0]));\n    }\n\n    accum(accumFunc=e=>e){\n        return this.reduce((acc, x) => {\n            return acc.concat(acc.last() + accumFunc(x))\n        }, List.from([0]))\n    }\n\n    transpose(func=(e)=>e){\n        if((this[0].length) && (this[0].length > 0) && this.same(e => e.length)){\n            let newList = this[0].map((_e, i) => {\n                return func(this.map(e => e[i]));\n            })\n            return new List(...newList);\n        } else throw Error('transpose: Invalid array dimension for transposing');\n    }\n\n    diff(diffFunc=e=>e){\n        if (this.length < 2){\n            throw Error('diff: at least two element to get a diff result');\n        } \n        const list = List.from([this.most(), this.rest()]);\n        return list.transpose(diffFunc);\n    }\n\n    // copy the list, and try to clone the elements if\n    // a copy method exists.\n    copy(){\n        return this.map(e => e.copy ? e.copy() : e);\n    }\n\n}\n\nmodule.exports = List;","import './CanvasExtend';\n\nimport Vec from './Vec';\nimport List from './List';\nimport Segs from './Segs';\nimport Radical from './Radical';\nimport Stroke from './Stroke';\nimport Seg from './Seg';\n\nlet canvas = document.createElement('canvas'),\n    ctx = canvas.getContext('2d'),\n    dpr = window.devicePixelRatio;\n\ncanvas.width  = 400 * dpr;\ncanvas.height = 400 * dpr;\ncanvas.style.width  = 400;\ncanvas.style.height = 400;\ndocument.getElementById('canvas-container').appendChild(canvas);\nctx.translate(canvas.width/2, canvas.height/2);\nctx.scale(dpr, dpr);\n\nfunction tes(){\n    let len  = 19, range = 5;\n    let vecsCircles = new List(0);\n    for (let r = 0; r < 6; r++){\n\n        let vecs = Array(len).fill(0).map((e, i) => (new Vec(i/(len)*360)).mult(0.8 * (r+1) / range));\n\n        vecsCircles.push((new Segs(0)).fromVecs(vecs));\n\n        if(r % 2 === 1){\n            console.log(vecsCircles[r]);\n            vecsCircles[r].flip();\n        }\n    }\n\n    let poly = new Radical(vecsCircles),\n        polyCopy = poly.copy();\n    console.log(poly)\n    // poly.shrink(0.05, ctx);\n    // polyCopy.draw(ctx);\n    // poly.draw(ctx);\n}\n// testRadical();\n\nfunction testShrink(){\n    let len  = 12;\n    let vecsCircle =(new List(len)).fill(0).map((e, i) => (new Vec(i/(len)*360)).mult(0.5));\n    let vecsLine = Array(len).fill(0).map((e, i)=> new Vec( i/(6-1)*2 - 1, 0.3) );\n\n    // let poly1 = new Radical([(new Segs(0).fromVecs(vecsCircle))]);\n\n    let stroke1 = new Stroke((new Segs(0)).fromVecs(vecsCircle), true),\n        stroke2 = new Stroke(new Segs(0).fromVecs(vecsLine));\n\n    let enter = 3;\n    stroke1.segs.cutEnter(enter, 0.5);\n    stroke1.segs.cutGoing(enter+1, new Vec(0.1, 0));\n    stroke1.segs.cutGoing(enter+2, new Vec(-0.1, 0));\n    let cuts = stroke1.segs.cutLeave(enter+3, 14, 0.5);\n    console.log(cuts[0].map(e=>e.head),'cutresult');\n    let poly1 = new Radical(new List(cuts[0])),\n        poly2 = new Radical(new List(cuts[1])),\n        poly3, poly4;\n\n\n    poly1 = poly1.copy();\n    poly2 = poly2.copy();\n    poly1.trans(new Vec(-0.15, 0.1));\n    poly2.trans(new Vec(0.15, -0.1));\n    poly3 = poly1.copy();\n    poly4 = poly2.copy();\n    poly1.shrink(0.05);\n    poly2.shrink(0.05);\n\n    console.log(poly1, poly2);\n    poly1.draw(ctx, true);\n    poly2.draw(ctx, true);\n    poly3.draw(ctx);\n    poly4.draw(ctx);\n\n    // stroke1.draw(ctx);\n    // stroke2.draw(ctx);\n\n    // segs1.flip();\n    // console.assert(segs1[0].head === segs2.last().tail, 'Segs: flip error');\n\n    let segsLine = new Segs(vecsLine);\n    // console.log(segsLine.torque().center);\n}\n// testShrink();\n\nfunction testCut(){\n\n    let seg1 = new Seg(new Vec(0, 0), new Vec(0, 1)),\n        seg2 = new Seg(new Vec(0, 0), new Vec(1, 0)),\n        seg3 = new Seg(new Vec(-1, 0), new Vec(2, 0));\n\n    console.log(seg1.intersect(seg2));\n    console.log(seg1.intersect(seg3));\n\n    let edges  = 4,\n        circles = new List(0);\n    for (let i = 0; i < 4; i++){\n        let vecs = (new List(edges+i*4)).fill(0).map((e, n) => (new Vec(n/(edges+i*4)*360+22.5)).mult(0.3+i*0.2)),\n            circle = new Segs(0).fromVecs(vecs);\n        \n        if(i%2 === 0) {circle.flip()};\n        console.log(circle.area());\n        circles.push(circle);\n    }\n    let poly = new Radical(circles);\n\n    let len = 14,\n        width = 0.6;\n    for (let i = 0; i < 4; i++){\n        let vecsLine = [new Vec(-0.2 *(i+1), i*0.05), new Vec(0, i*0.05), new Vec(0.2 * (i+1), i*0.05)];\n        let stroke = new Stroke(new Segs(0).fromVecs(vecsLine));\n        poly.contours = stroke.cut(poly.contours);\n        poly = poly.copy();\n        stroke.draw(ctx, false);\n    }\n\n    let shratio = -0.02;\n    poly = poly.copy();\n    poly.shrink(shratio);\n    poly.draw(ctx, true, '#34567888');\n    \n}\n// testCut();\n\nfunction testCentroid(){\n    let edges = 4,\n        circles = new List(0);\n    for (let i = 0; i < 5; i++){\n        let vecs = (new List(edges+i*4)).fill(0).map((e, n) => (new Vec(n/(edges+i*4)*360+22.5)).mult(0.3+i*0.1).add(new Vec(i*0.05, 0))),\n            circle = new Segs(0).fromVecs(vecs);\n        \n        if(i%2 === 0) {circle.flip()};\n        console.log(circle.area());\n        circles.push(circle);\n\n    }\n    let poly = new Radical(circles);\n\n    poly.draw(ctx, true)\n}\n// testCentroid();\nfunction testRadical(){\n    let radical = new Radical();\n\n    let stroke1 = new Stroke(new Segs(0).fromVecs([new Vec(-0.4, 0), new Vec(0.4, 0)]));\n    let stroke2 = new Stroke(new Segs(0).fromVecs([new Vec(0.4, -0.4), new Vec(0.1, 0.1), new Vec(0.4, 0.4)]));\n    let stroke3 = new Stroke(new Segs(0).fromVecs([new Vec(0, -0.4), new Vec(0, 0.4)]));\n    radical.addStroke(stroke1, [0]);\n    radical.addStroke(stroke3, [0, 1], [1]);\n    // radical.addStroke(stroke3, [0]);\n    // radical.addStroke(stroke2, [2]);\n    // radical.shrink(-0.02);\n    radical.draw(ctx, false);\n    console.log(radical.contours);\n}\ntestRadical();\n","import List from './List';\nimport Segs from './Segs';\nimport Seg from './Seg';\nimport Vec from './Vec';\n\nexport default class Radical {\n    constructor(contours){\n\n        if (contours === undefined){\n            contours = new List((new Segs(0)).fromVecs([new Vec(-1, -1), new Vec(1, -1), new Vec(1, 1), new Vec(-1, 1)]))\n        }\n\n        this.contours = contours;\n        this.closeContours();\n\n        this.strokes = [];\n    }\n\n    closeContours(){\n        for (let contour of this.contours){\n\n            if(!contour.last().tail.equal(contour[0].head)){\n                let conn = new Seg(contour.last().tail, contour[0].head);\n                contour.push(conn); \n            } else {\n                contour.last().tail = contour[0].head;\n            }\n        }\n    }\n\n    union(contourLabels) {\n        if(contourLabels.length === 1){\n            return this.contours[contourLabels[0]].copy();\n        } else if (contourLabels.length > 1){\n            let contours = this.contours.copy(),\n                [first, ...restLabels] = contourLabels,\n                unioned = contours[first].copy();\n            \n            // console.log(JSON.stringify(contourLabels.map(e => contours[e]), null, 2));\n            for (let label of restLabels){\n                unioned.undoCutThrough(contours[label]);\n                console.log(unioned.map(({head, tail}) => [head, tail]).flat(), 'before undo cut');\n                unioned.undoCut();\n            }\n            return unioned;\n        } else throw Error('Radical union: YOU MUST EXPLICITLY SPECIFY THE LABELS OF CONTOURS TO BE UNIONED')\n    }\n\n    split(stroke, contourLabels){\n\n    }\n\n    addStroke(stroke, unioned=[], splitted=[]){\n\n        // 1. get the union of contours and calculate the place;\n        //    where the stroke will be put.\n        let unionedContour = this.union(unioned)\n        stroke.trans(unionedContour.centroid().sub(stroke.center()));\n        console.log('unioned centroidd', unionedContour.centroid());\n        if (splitted.length === 0){\n            this.contours = stroke.cut(this.contours).copy();\n            // console.log('addstroke', this.contours)\n            this.closeContours();\n        } else {\n            // if to split specified\n        }\n\n        this.strokes.push(stroke);\n    }\n\n    copy(){\n        let poly = new Radical(this.contours.copy());\n        // poly.close();\n        return poly;\n    }\n\n    trans(vec){\n        for (let contour of this.contours){\n            contour.trans(vec);\n            contour.last().tail.iadd(vec.neg());\n        }\n    }\n\n    draw(ctx, stroke, color='rgb(0, 0, 0, 0.1)'){\n        ctx.strokeStyle = 'black';\n        ctx.fillStyle=color;\n        ctx.beginPath();\n        ctx.drawContours(this.contours);\n        ctx.fill();\n        if(stroke)\n        ctx.stroke();\n\n        ctx.save();\n        ctx.fillStyle='rgb(0, 0, 0, 0.2)'\n        for (let i = 0; i < this.contours.length; i++){\n            let contour = this.contours[i];\n            for (let [index, seg] of contour.entries()){\n                if(stroke)\n                    ctx.text(index, seg.head);\n                else\n                    ctx.point(seg.head);\n            }\n            ctx.text(i, contour.centroid(), Math.abs(contour.area())*80);\n        }\n        ctx.restore();\n\n        ctx.save();\n        for (let stroke of this.strokes){\n            stroke.draw(ctx);\n        }\n        ctx.restore();\n    }\n\n}\n\n","// The design of seg\n// -----------------\n// 1) Cloning Vector or Not?\n// Line segment is the class for building polygon and path. In our scenario, we have two\n// frequent operation of\n// \n// * cutting through the polygon and merge them back from the cutting path.\n// * move the cutting path.\n// \n// The problem of cloning vector, is once we cloned the vector, we will lose the information\n// that if the edge of two polygons are actually sharing same path. Thus, before we really need\n// to modify the polygons, such as shrinking, we will keep the segs created from same vector\n// always refer to same vector object.\n\nimport Torque from './Torque';\n\n// https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection#Given_two_points_on_each_line\n// \n// note that:\n// |x1-x3 x3-x4|\n// |           | (determinant) is equivalent to\n// |y1-y3 y3-y4|\n// \n// cross((x1-x3, y1-y3), (x3-x4, y3-y4)), or\n// \n// cross(P1-P3, P3-P4)\n\nfunction FourPointIntersect(head1, tail1, head2, tail2){\n    let h1h2 = head1.diff(head2),\n        h1t1 = head1.diff(tail1),\n        h2t2 = head2.diff(tail2),\n        detA = h1h2.cross(h2t2),\n        detB = h1t1.cross(h1h2),\n        detS = h1t1.cross(h2t2),\n        ratioA =  detA/detS,\n        ratioB = -detB/detS,\n        point = head1.lerp(ratioA, tail1),\n        det = detS;\n    \n    return {\n        ratioA, // mag(point - head1) / mag(tail1 - head1)\n        ratioB, // mag(point - head2) / mag(tail2 - head2)\n        point, // point\n        det  // h1t1 x h2t2 (for determining the direction)\n    }\n}\n\nfunction TwoSegIntersect(seg1, seg2){\n    const {head: head1, tail:tail1} = seg1;\n    const {head: head2, tail:tail2} = seg2;\n    return FourPointIntersect(head1, tail1, head2, tail2);\n}\n\nexport default class Seg {\n    constructor(hd, tl){\n        this.head = hd;\n        this.tail = tl;\n    }\n\n    // ==============================================\n    // in-place operations / transforms\n\n    trans(vec){\n        this.head.trans(vec);\n        this.tail.trans(vec);\n    }\n\n    rotate(angle, origin){\n        this.head.rotate(angle, origin);\n        this.tail.rotate(angle, origin);\n    }\n\n    scale(mag){\n        this.head.mult(mag);\n        this.tail.mult(mag);\n    }\n\n    flip(){\n        const {head, tail} = this;\n        this.head = tail;\n        this.tail = head;\n    }\n\n    // ==============================================\n    // operations that producing other type of values\n\n    diff (){\n        const {head, tail} = this;\n        return tail.diff(head);\n    }\n\n    len (){\n        return this.diff().mag();\n    }\n\n    lerp(ratio){\n        const {head, tail} = this;\n        return head.lerp(ratio, tail);\n    }\n\n    torque(){\n        const {head, tail} = this;\n        return Torque.fromVec(tail.diff(head));\n    }\n\n    intersect(that){\n        return TwoSegIntersect(this, that);\n    }\n\n    cross(){\n        const {head, tail} = this;\n        return head.cross(tail);\n    }\n\n    copy(){\n        return new Seg(this.head.copy(), this.tail.copy());\n    }\n}","import List from './List';\nimport Seg from './Seg';\nimport Vec from './Vec';\nimport Torque from './Torque';\n\nexport default class Segs extends List {\n    constructor(...segs){\n        super(...segs);\n    }\n\n    static fromVecs(vecs, {closed=false}={}){\n        const actualVecs = closed ? vecs.concat(vecs[0]) : vecs;\n\n        let list = actualVecs.diff(([head, tail])=>new Seg(head, tail));\n        return new Segs(...list);\n    }\n\n    toVecs(){\n        let last;\n        let vecs = [];\n        for (let {head, tail} of this){\n            if (!head.is(last)){\n                vecs.push(head);\n                last = head;\n            }\n            if (!tail.is(last)){\n                vecs.push(tail);\n                last = tail;\n            }\n        }\n\n        // for closed segs (polygon), needed to remove the last one\n        if (last.is(vecs[0])){\n            vecs.pop();\n        }\n        return vecs;\n    }\n\n    trans(transVec){\n        const vecs = this.toVecs();\n\n        for (let vec of vecs){\n            vec.trans(transVec);\n        }\n    }\n\n    rotate(angle, origin){\n        const vecs = this.toVecs();\n        for (let vec of vecs){\n            vec.rotate(angle, origin);\n        }\n    }\n\n    scale(ratio, origin){\n        const actualOrigin = origin || this[0].head;\n        const vecs = this.toVecs();\n        for (let vec of vecs){\n            vec.mult(ratio, actualOrigin);\n        }\n    }\n\n    flip(){\n        this.reverse();\n        for (let seg of this){\n            seg.flip();\n        }\n    }\n\n    area(){\n\n        if (this.length < 3 || this.last().tail !== this[0].head){\n            throw Error('Area can be found from closed segment lists a.k.a polygon');\n        }\n\n        const vals = this.map(seg => 0.5* seg.cross());\n        return vals.sum();\n    }\n\n    centroid(){\n        let area = this.area();\n\n        return this\n            .map(e => {\n                const mid = e.lerp(1/2);\n                mid.mult(e.cross() / (3 * area))\n                return mid;\n            })\n            .sum();\n    }    \n\n    lens(){\n        let lens = new List(0);\n        for (let seg of this){\n            lens.push(seg.len());\n        }\n        return lens;\n    }\n\n    /**\n     * intersect with a single segment.\n     * \n     * returns a list, since even a signle segment could create multiple\n     * intersections.\n     * @param {Vec} that \n     */\n    intersect(that){\n        let intersects = new List(0)\n        for (let i = 0; i < this.length; i++){\n            const seg = this[i];\n            const {\n                ratioA:ratioThat,\n                ratioB:ratioThis,\n                point,\n                det\n            } = that.intersect(seg);\n            intersects.push({ratioThis, ratioThat, point, det, index:i});\n        }\n        return intersects;\n    }\n\n    /**\n     * cutEnter\n     * make the entrance of a cutting\n     * expected to receive the result from intersection.\n     * @param {object} param0 \n     */\n    cutEnter({index, point}){\n        \n        point.setAttr('cutEntrance', true);\n\n        const {head, tail} = this[indexThis];\n\n        // remove one, create two.\n        this.splice(index, 1, new Seg(head, point), new Seg(point, tail));\n\n        return {index, point}\n    }\n\n    /**\n     * cutGoing\n     * cutting further from the cut entrance.\n     * except the receive the result of cutEnter, or last cutGoing\n     * @param {object} param0 \n     */\n    cutGoing(index, point){\n        let {tail} = this[index];\n        this.splice(index, 0, new Seg(tail, point), new Seg(point, tail));\n\n        return index+1\n    }\n\n    /**\n     * cutThrough\n     * cutting through the polygon / closed segment list.\n     * \n     * By far, the last point of cutting point is the intersection between the cutting path\n     * and the polygon, on the exit side, now we need to make the polygon into two.\n     * \n     * The result of plain cutting (not considering the cutting path intersect with itself)\n     * causes two intersections, and finally split the polygon into two. \n     * \n     * When cutting a polygon, there is an \"entrance\" segment and an \"exit\". The issue here is\n     * that by the cutting path growing on the polygon, the index of exit segment will grow as\n     * well, if its index is greater than the index of entrance segment before cutting.\n     * \n     * When cutting through a polygon, if the exit index is greater than the entrance index, then\n     * we define the new polygon that doesn't contain the zero-index segment of original polygon\n     * the \"left one\". otherwise the \"right one\". ASSUME the segments are indexed in CCW manner.\n     * \n     *          | Entrance                          | Entrance\n     * +--------+-------+  ^               +--------+-------+  \n     * |        |       |  | index         |        |       |  \n     * |        |       0  | direction     0        |       |  \n     * |        |       |  | (CCW)         |        |       |  \n     * +--------+-------+  |               +--------+-------+  \n     *          | Exit                              | Exit\n     *          V                                   V\n     * We call the one of the new polygons \"parent\", if it contains the zero segment index\n     * of original polygon, and 'child' for the other. You can imagine the zero segment index\n     * \n     */\n    cutThrough(enterIndex, exitIndex, point){\n\n        point.setAttr('cutExit', true);\n\n        if (enterIndex < exitIndex){\n            // in this case, exit index changed along with cutting progress.\n            console.log('notch - split - 0')\n            const left = this.slice(0, enterIndex+1).concat(this.slice(exitIndex));\n            const right = this.slice(enterIndex, exitIndex);\n            return {left, right};\n        } else if (enterIndex > exitIndex){\n            console.log('notch - 0 - split')\n            const left = this.slice(enterIndex).concat(this.slice(0, exitIndex));\n            const right = this.slice(exitIndex, enterIndex);\n            return {left, right};\n        } else throw Error('its impossible to have same enterIndex and exitIndex when cutting through', enterIndex, exitIndex);\n\n    }\n\n    torque(){\n        return Torque.sum(this.map(e => e.torque()));\n    }\n\n    copy(){\n        // console.log(this);\n        let segs = this.map(seg => seg.copy ? seg.copy() : seg);\n        for (let i = 0; i < segs.length - 1; i++){\n            segs[i].tail = segs[i+1].head;\n        }\n        return segs;\n    }\n}","import Seg from './Seg';\nimport List from './List';\n\nfunction intersectHead(cutterSeg, contours){\n    let intersects = [];\n    let EPSILON = 1e-10;\n\n    for (let con = 0; con < contours.length; con++){\n        let segs = contours[con];\n        for (let seg = 0; seg < segs.length; seg++){\n            let {t, u, d} = cutterSeg.intersect(segs[seg]);\n            if ( t < EPSILON && u < 1-EPSILON && u > EPSILON ){\n                intersects.push({t, u, d, con, seg});\n            }\n        }\n    }\n    intersects.sort((a, b) => b.t - a.t)\n    // console.log(intersects, 'headIntersects')\n    return intersects;\n}\n\nfunction intersectTail(cutterSeg, contours){\n    let intersects = [];\n    let EPSILON = 1e-10;\n\n    for (let con = 0; con < contours.length; con++){\n        let segs = contours[con];\n        for (let seg = 0; seg < segs.length; seg++){\n            let {t, u, p, d} = cutterSeg.intersect(segs[seg]);\n            if ( t > 1 - EPSILON && u < 1-EPSILON && u > EPSILON ){\n                intersects.push({t, u, p, d, con, seg});\n            }\n        }\n    }\n    intersects.sort((a, b) => a.t - b.t)\n    // console.log(intersects, 'tailIntersects')\n    return intersects;\n}\n\n// return intersections between all contours of poly, and\n// the given seg, sorted by t parameter.\nfunction intersectSeg(cutterSeg, contours){\n    let intersects = [];\n    let EPSILON = 1e-10;\n\n    for (let con = 0; con < contours.length; con++){\n        let segs = contours[con];\n        for (let seg = 0; seg < segs.length; seg++){\n            let {t, u, d} = cutterSeg.intersect(segs[seg]);\n            if ( t < 1-EPSILON && t > EPSILON && u < 1-EPSILON && u > EPSILON ){\n                intersects.push({t, u, d, con, seg});\n            }\n        }\n    }\n    intersects.sort((a, b) => a.t - b.t)\n    \n    return intersects;\n}\n\nexport default class Stroke {\n    constructor(segList, closed){\n        this.segs = segList;\n\n        if (closed){\n            this.closed = true;\n            let conn = new Seg(this.segs.last().tail.copy(), this.segs[0].head.copy());\n            this.segs.push(conn); \n        }\n        \n        this.displayed = this.segs.copy();\n    }\n\n    trans(vec){\n        this.segs.trans(vec);\n        this.displayed = this.segs.copy();\n    }\n\n    joint(that, {thisPos, thatPos}){\n        if (thisPos === 1){\n            this.segs.push(...(thatPos === 0 ? that.segs : that.segs.reverse()));\n        } else if (thisPos === 0){\n            this.segs.unshift(...(thatPos === 0 ? that.segs : that.segs.reverse()));\n        }\n        this.displayed = this.segs.copy();\n    }\n\n    draw(ctx, stroke){\n        ctx.strokeStyle = 'black';\n        ctx.beginPath();\n        ctx.drawSegs(this.displayed);\n        ctx.stroke();\n    \n        ctx.save();\n        ctx.fillStyle = \"rgb(0, 0, 0, 0.2)\";\n        for (let [index, seg] of this.segs.entries()){\n            if(stroke)\n                ctx.text(index, seg.head);\n            else\n                ctx.point(seg.head);\n        }\n\n        ctx.restore();\n    }\n\n    center(){\n        return this.segs.torque().center;\n    }\n\n    cut(contours){\n\n        let entered, notchPrev, splitPrev;\n\n        for (let cutter = 0; cutter < this.segs.length; cutter++) nextCutter:{\n            let cutterSeg = this.segs[cutter];\n\n            if(cutter===0){\n                let headIntersects = intersectHead(cutterSeg, contours);\n                if (headIntersects.length > 0){\n                    let {t, con, d} = headIntersects[0];\n                    console.log('head', con, t, d);\n                    if (d < 0) cutterSeg.head.iadd(cutterSeg.diff().mult(t-0.01));\n                }\n            }\n\n            if(cutter === this.segs.length - 1){\n                let tailIntersects = intersectTail(cutterSeg, contours);\n                if (tailIntersects.length > 0){\n                    let {t, con, d, p} = tailIntersects[0];\n                    if (d > 0) cutterSeg.tail.iadd(p.sub(cutterSeg.tail).mult(t));\n                }\n            }\n\n            if(entered !== undefined){\n                // console.log(entered, contours);\n                contours[entered].cutGoing(notchPrev, cutterSeg.head);\n                notchPrev += 1;\n            }\n\n            // find the intersections bettwen the segment from cutter\n            // stroke and from all contours. Sort them by the distance\n            // bettwen the intersection to the head of cutter segment.\n            while(true){\n                let intersects = intersectSeg(cutterSeg, contours);\n                if (intersects.length === 0) break;\n\n                let {u, d, con, seg} = intersects[0];\n                if (entered === undefined){\n                    console.log('entered', con);\n                    entered = con;\n                    notchPrev = seg;\n                    contours[entered].cutEnter(notchPrev, u);\n                } else {\n\n                    splitPrev = seg;\n                    if (entered === con) {\n                        console.log('cutting through self');\n                        contours[entered].cutEnter(splitPrev, u);\n                        notchPrev += notchPrev > splitPrev ? 1: 0;\n    \n                        let [left, right] = contours[entered].cutThrough(notchPrev+1, splitPrev+1);\n                        contours.splice(con, 1, left, right);\n                    } else {\n                        console.log('cutting through ring', con);\n                        contours[con].cutEnter(splitPrev, u);\n                        contours[entered] = contours[entered].cutThroughRing(notchPrev+1, splitPrev+1, contours[con]);\n                        contours.splice(con, 1);\n                    }\n                    entered = undefined;\n                    // console.log('contours', contours);\n                }    \n            }\n        }\n\n        return contours;\n        // console.log(contours);\n   }\n\n}","import Vec from './Vec';\n\nexport default class Torque{\n\n    static sum(torques){\n        let prodSum = torques\n                .map(t => t.toProduct())\n                .reduce(({x:accX, y:accY}, {x, y}) => new Vec(accX+x, accY+y), new Vec()),\n            massSum = torques\n                .map(t => t.mass)\n                .reduce((acc, v) => acc + v, 0);\n    \n        prodSum.mult((torques.length === 0) ? 0 : 1/massSum)\n\n        return new Torque({\n            center: prodSum,\n            mass : massSum\n        })    \n    }\n\n    static fromVec(vec){\n        return new Torque({center:(new Vec()).lerp(0.5, vec), mass: vec.mag()});\n    }\n\n    constructor({center=new Vec(), mass=0}={}){\n        // console.log(\"new torque\", center, mass)\n        this.center = center;\n        this.mass   = mass;\n    }\n\n    toProduct(){\n        const {center, mass} = this;\n        const copy = center.copy();\n        copy.mult(mass);\n        return copy;\n    }\n}\n","const EPSILON = 1e-6;\n\nexport default class Vec{\n    /**\n     * Simple Vec class.\n     * \n     * @param {any} x \n     * @param {any} y \n     */\n    constructor(x, y, attr={}){\n        if (y === undefined){\n\n            if(x === undefined) {\n                // For nothing given, new vec created\n                \n                this.x = 0;\n                this.y = 0;\n            } else if (x.constructor === Vec){\n\n                // if argument given as {x:1, y:1}\n                \n                this.x = x.x;\n                this.y = x.y;\n            } else if (x.len !== undefined && x.ang !== undefined){\n\n                // if argument given as {len: 1, ang: 0}\n\n                this.x = x.len * Math.cos(x.ang*Math.PI/180);\n                this.y = x.len * Math.sin(x.ang*Math.PI/180);\n            } else if (typeof x === 'number'){\n\n                // if x is a number \n\n                this.x = Math.cos(x*Math.PI/180);\n                this.y = Math.sin(x*Math.PI/180);\n            } else {\n                throw Error (`unsupported argument type:${typeof x}, constructor:${x.constructor.name}`)\n            }\n        } else {\n            this.x = x;\n            this.y = y;\n        }\n        this.attr = attr;\n    }\n\n    trans({x, y}, {neg=false}={}){\n        if (neg) {\n            this.x -= x;\n            this.y -= y;\n        } else {\n            this.x += x;\n            this.y += y;\n        }\n    }\n\n    mult(vec){\n        if(typeof vec === 'number'){\n            this.y *= vec;\n            this.x *= vec;\n        } else if (vec.constructor === Vec){\n            this.x *= vec.x;\n            this.y *= vec.y;\n        } else {\n            throw Error(`invalid parameter type: ${typeof vec}`);\n        }\n    }\n\n    scale(ratio, about=(new Vec(0, 0))){\n        \n        this.trans(about, {neg: true});\n        this.mult(ratio);\n        this.trans(about);\n    }\n\n    /**\n     * # rotate\n     * \n     * rotate about \n     * \n     * @param {number} theta angle to rotate in degree.\n     */\n    rotate(theta, origin=(new Vec(0, 0))){\n\n        this.trans(origin, {neg:true});\n\n        const {x, y} = this;\n        switch(theta){\n            case 90 :\n                this.x = -y;\n                this.y =  x;\n                break;\n            case -90 : \n                this.x =  y;\n                this.y = -x;\n                break;\n            case 180    : \n            case -180   :\n                this.x = -x;\n                this.y = -y;\n                break;\n            default: \n                let rad = theta / 180 * Math.PI,\n                sin = Math.sin(rad),\n                cos = Math.cos(rad);\n\n                this.x = x * cos - y * sin;\n                this.y = x * sin + y * cos;\n        }\n\n        this.trans(origin);\n    }\n\n    neg(){\n        const {x, y} = this;\n        this.x = -x;\n        this.y = -y;\n    }\n\n    // ==================================================================\n    // creating something new.\n\n    is(vec){\n        return this === vec;\n    }\n\n    // this method should be only used by List.sum method.\n    add({x, y}){\n        return new Vec(this.x + x, this.y + y);\n    }\n\n    diff({x, y}){\n        return new Vec(this.x - x, this.y - y);\n    }\n\n    lerp(ratio, {x, y}){\n        return new Vec(\n            this.x + (x - this.x) * ratio,\n            this.y + (y - this.y) * ratio,\n        )\n    }\n\n    /**\n     * # vector cross product\n     * \n     * returns the cross product between this and vec, or is the result of\n     * determinant:\n     * \n     * |this.x   that.x|\n     * |               |\n     * |this.y   that.y|\n     * \n     * ---\n     * \n     * Note: \n     * 1) the cross product conforms to right-hand rule. When A is assigned to\n     *    the index finger, and B to middle, then the thumb is pointing to AxB.\n     * \n     * 2) When determining of which side does one vector resides on another with\n     *    cross product, according to 1), when AxB is positive, B is on the LEFT\n     *    of A.\n     * \n     * @param {Vec} that another vector\n     */\n    cross(that){\n        return this.x * that.y - that.x * this.y;\n    }\n\n    dot(that){\n        return this.x * that.x + this.y * that.y;\n    }\n \n    mag(){\n        return Math.hypot(this.x, this.y);\n    }\n\n    norm(){\n        let mag = this.mag();\n        return this.mult(mag === 0 ? 0 : 1/mag);\n    }\n\n    angle(){\n        return Math.atan2(this.y, this.x) / Math.PI * 180;\n    }\n\n    addAttr(attrName, attrValue){\n        this.attr[attrName] = attrValue;\n    }\n\n    /**\n     * Set attribute to Vec. overwrite existing attributes.\n     * @param {object} attrObject \n     */\n    setAttr(attrObject){\n        return Object.assign(this.attr, attrObject);\n    }\n\n    /**\n     * copy: duplicate an object instance of this.\n     * @returns {Vec}\n     */\n    copy(){\n        return new Vec(this.x, this.y, JSON.parse(JSON.stringify(this.attr)));\n    }\n\n    toString(){\n        return `(${this.x.toFixed(5)}, ${this.y.toFixed(5)})`\n    }\n}"],"sourceRoot":""}